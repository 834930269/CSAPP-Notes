# Ch4 Processor Architecture

## 4.6 Summary

指令集的体系结构，在处理器的行为和处理器的实现细节之间实现了一层抽象。

本章通过简化 IA32 指令集的数据类型、地址模式和指令编码，定义了 Y86-64 指令集，将指令的不同过程分成五个阶段分别处理，构造了 SEQ 处理器，每个时钟周期执行一条指令。

在 SEQ 的基础上，使用流水线化让不同的阶段并行操作，改善了系统的吞吐量。流水线的处理中，需要考虑转发逻辑、冒险情况以及异常处理。

处理器设计的经验：

* 管理复杂性。优化硬件资源，在最小成本下获得最大性能。
* 不需要直接实现 ISA。先 ISA 获得一个顺序的设计，再去使用流水线的设计。
* 硬件设计人员必须非常谨慎小心。出要处理好各种可能的细微错误，仔细考虑各种组合控制逻辑，例如，弹出值到栈指针。

