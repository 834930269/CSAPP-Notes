# 章节 9 虚拟存储器

## 9.4 ~ 9.6 节

### 作为管理内存的工具

1. 为每个进程提供了一个独立的页表，因而也就是一个独立的虚拟地址空间
2. 多个虚拟页面可以映射到同一个共享物理页面上
3. 简化了链接和加载、代码和数据共享，以及应用程序的存储器分配，使得连续的页表可以随机地分散在物理存储器中

### 作为保护内存的工具

扩展 PTE，添加三个许可位

1. SUP 位：表示进程是否必须运行在内核模式下才能访问该页
2. READ 位和 WRITE 位：用于控制该页是否可读和可写
3. 违反这些条件会导致段错误（degmentation fault）

### 多级页表

1. 背景：按照 4KB 划分内存会导致大量的空 PTE
2. 如何设计：设计一个多级页表结构，例如一级页表映射的空间相当于 1024 个二级页表
3. 为什么可以减少内存占用：
   1. 如果一级页表中的一个 PTE 是空的，那么相应的二级页表就根本不会存在
   2. 只有一级页表和最经常使用的二级页表在内存中，其余的可以放在磁盘上
   
